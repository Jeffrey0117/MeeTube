/* stylelint-disable liberty/use-logical-spec */
.ftVideoPlayer {
  display: flex;
  position: relative;

  /*
    For vertical videos and full window mode the background is visible,
    so we want to make it black as it defaults to transparent
   */
  background-color: #000;

  /*
    Fixes the seek bar thumbnails causing a horizontal scroll bar
    to appear after exiting full screen and full window.
    But also vertically in case context menu overflows.
  */
  overflow: hidden;
}

.player {
  width: 100%;
}

.vrCanvas {
  position: absolute;
  inset: 0;
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

:deep(.shaka-bottom-controls) {
  /*
    Force left to right, so that the UI doesn't break.
    With rtl, the progress bar was filling from the left, but the scrubber was moving from the right.
    video.js forced the direction for their controls too
  */
  direction: ltr;
}

.sixteenByNine {
  aspect-ratio: 16 / 9;
}

.stats {
  position: absolute;
  left: 5px;
  top: 5px;
  padding: 10px;
  border-radius: 5px;
  line-height: 1.4em;
  background-color: rgb(0 0 0 / 70%);
  color: #fff;
  z-index: 2;

  /* user-select is intentionally not disabled, so that you can select and copy the stats */
}

.valueChangePopup {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  padding: 10px;
  border-radius: 5px;
  font-size: 1.1em;
  background-color: rgb(0 0 0 / 70%);
  color: #fff;
  width: 85px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  z-index: 2;
  pointer-events: none;
}

.valueChangePopup.invert-content-order {
  flex-direction: row-reverse;
}

.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.5s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

.offlineWrapper {
  position: absolute;
  top: 20px;
  inset-inline-end: 20px;
  margin-inline-start: 20px;
  display: flex;
  flex-direction: row;
  gap: 10px;
  align-items: center;
  background-color: #000;
  color: #fff;
  padding: 10px;
  border-radius: 10px;
}

.offlineIcon {
  font-size: 30px;
}

.offlineMessage {
  margin: 0;
}

.offlineMessageSubtitle {
  font-size: 0.8em;
}

.skippedSegmentsWrapper {
  position: absolute;
  right: 2%;
  bottom: max(15%, calc(46px + 2.5% + 3%)); /* 46px + 2.5% is the height of the controls */
  display: flex;
  flex-direction: column;
  gap: 10px;
  align-items: center;
  pointer-events: none;
}

.skippedSegment {
  margin-block: 0;
  padding: 10px;
  border-radius: 20px;
  background-color: rgb(0 0 0 / 80%);
  color: #fff;
}

:deep(.markerContainer) {
  position: absolute;
  inset: 0;
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
}

:deep(.sponsorBlockMarker) {
  background-color: var(--primary-color);
}

:deep(.chapterMarker) {
  width: 2px;
  background-color: #000;
}

:deep(.sponsorBlockMarker),
:deep(.chapterMarker) {
  position: absolute;
  opacity: 0.6;
  height: 100%;
}

:deep(.playerFullscreenTitleOverlay) {
  display: none;
  opacity: 0;
  position: absolute;
  margin: 0;
  top: 5px;
  left: 5px;
  max-width: calc(100% - 10px);
  font-size: xx-large;
  color: #fff;
  font-weight: normal;
  background-color: rgb(0 0 0 / 50%);
  border-radius: 5px;
  user-select: none;
  text-overflow: ellipsis;
  text-wrap: nowrap;
  overflow: hidden;

  /* copied from .shaka-scrim-container */
  transition: opacity cubic-bezier(0.4, 0, 0.6, 1) 0.6s;
}

:deep(.playerFullscreenTitleOverlay:dir(rtl)) {
  left: initial;
  right: 5px;
}

.ftVideoPlayer:fullscreen :deep(.playerFullscreenTitleOverlay) {
  display: block;
}

:deep(.shaka-controls-container[shown='true'] > .playerFullscreenTitleOverlay) {
  opacity: 1;
}

:deep(.shaka-controls-container > .shaka-play-button-container > .shaka-play-button) {
  padding: min(calc(15% / 2), 55px);
}

:deep(.shaka-controls-button-panel>.ft-shaka-skip-button .material-svg-icon) {
  font-size: 32px;
}

.ftVideoPlayer:fullscreen :deep(.theatre-button),
.ftVideoPlayer:fullscreen :deep(.full-window-button),
.fullWindow :deep(.theatre-button) {
  display: none;
}

.fullWindow {
  position: absolute !important;
  max-width: initial !important;
  inset: 0;
  z-index: 1000;
}

.fullWindow > .player {
  width: 100%;
  height: 100%;
}

/* added to the body element */
:global(.playerFullWindow) {
  overflow: hidden;
  margin: 0;
  padding: 0;
}

/* Subtitle/Caption Styling */
:deep(.shaka-text-container) {
  /* Move captions up from bottom (away from controls) */
  bottom: 60px !important;
  /* Larger font size for better readability */
  font-size: 1.4em !important;
}

:deep(.shaka-text-container span) {
  /* Better subtitle background */
  background-color: rgba(0, 0, 0, 0.75) !important;
  padding: 4px 8px !important;
}

@media only screen and (width <=400px) {
  :deep(.shaka-text-container) {
    /* make subtitles take up slightly less space when a mobile phone is in portrait orientation */
    font-size: 16px !important;
    bottom: 50px !important;
  }
}

@media only screen and (width <=1000px) {
  :deep(.playerFullscreenTitleOverlay) {
    font-size: large;
  }
}

@media only screen and (width <=1350px) {
  :deep(.theatre-button) {
    display: none;
  }
}

@media (prefers-reduced-transparency) {
  :deep(.playerFullscreenTitleOverlay),
  .skippedSegment,
  .stats {
    background-color: rgb(0 0 0 / 90%);
  }
}

/* Tap to Play overlay for iOS autoplay fallback */
.tapToPlayOverlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgb(0 0 0 / 60%);
  z-index: 100;
  cursor: pointer;
}

.tapToPlayButton {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  padding: 24px 48px;
  background-color: rgb(255 255 255 / 20%);
  border-radius: 16px;
  transition: background-color 0.2s;
}

.tapToPlayButton:hover {
  background-color: rgb(255 255 255 / 30%);
}

.tapToPlayIcon {
  font-size: 48px;
  color: #fff;
}

.tapToPlayText {
  font-size: 18px;
  font-weight: 600;
  color: #fff;
}

/* Legacy Quality Selection Menu Styles */
:deep(.legacy-quality-button) {
  display: flex !important;
  align-items: center;
  justify-content: center;
}

:deep(.legacy-qualities) {
  min-width: 150px;
}

:deep(.legacy-resolution) {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 16px;
  width: 100%;
  background: transparent;
  border: none;
  color: inherit;
  cursor: pointer;
  font-size: 14px;
  text-align: left;
}

:deep(.legacy-resolution:hover) {
  background-color: rgba(255, 255, 255, 0.1);
}

:deep(.legacy-resolution[aria-selected="true"]) {
  background-color: rgba(255, 255, 255, 0.15);
}

:deep(.legacy-resolution .shaka-chosen-item) {
  margin-left: auto;
  margin-right: 0;
}

/* Mobile Responsive Styles for Player Controls */
@media only screen and (max-width: 680px) {
  :deep(.shaka-overflow-menu) {
    max-height: 60vh;
    overflow-y: auto;
  }

  :deep(.shaka-controls-button-panel) {
    padding: 4px;
  }

  :deep(.shaka-overflow-button),
  :deep(.shaka-fullscreen-button),
  :deep(.shaka-pip-button) {
    padding: 6px;
  }

  .stats {
    font-size: 12px;
    padding: 6px;
    max-width: calc(100% - 20px);
    overflow-x: auto;
  }

  .offlineWrapper {
    top: 10px;
    inset-inline-end: 10px;
    padding: 6px;
    font-size: 12px;
  }

  .offlineIcon {
    font-size: 20px;
  }

  .skippedSegmentsWrapper {
    right: 5%;
    bottom: max(20%, calc(46px + 5%));
  }

  .skippedSegment {
    padding: 6px 10px;
    font-size: 12px;
  }
}

/* Touch-friendly controls on mobile */
@media (hover: none) and (pointer: coarse) {
  :deep(.shaka-overflow-menu button),
  :deep(.legacy-resolution) {
    min-height: 44px;
    padding: 12px 16px;
  }
}

/* Mobile: 50vh height like FreeTube */
@media screen and (max-width: 639px) {
  .ftVideoPlayer {
    width: 100% !important;
    height: 50vh !important;
    min-height: 220px !important;
    max-width: 100% !important;
  }

  .ftVideoPlayer.sixteenByNine {
    aspect-ratio: unset !important;
    width: 100% !important;
    height: 50vh !important;
    min-height: 220px !important;
  }

  .player {
    width: 100% !important;
    height: 100% !important;
  }
}

/* Equalizer Panel Styles */
:deep(.ft-equalizer-panel) {
  position: absolute;
  bottom: 60px;
  right: 10px;
  background-color: rgb(28 28 28 / 95%);
  border-radius: 8px;
  padding: 12px;
  min-width: 320px;
  max-width: 360px;
  flex-direction: column;
  gap: 12px;
  z-index: 100;
  box-shadow: 0 4px 12px rgb(0 0 0 / 40%);
}

:deep(.ft-eq-header) {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 8px;
  border-bottom: 1px solid rgb(255 255 255 / 10%);
}

:deep(.ft-eq-title) {
  color: #fff;
  font-size: 14px;
  font-weight: 600;
}

:deep(.ft-eq-toggle) {
  position: relative;
  display: inline-block;
  width: 36px;
  height: 20px;
  cursor: pointer;
}

:deep(.ft-eq-toggle input) {
  opacity: 0;
  width: 0;
  height: 0;
}

:deep(.ft-eq-toggle-slider) {
  position: absolute;
  cursor: pointer;
  inset: 0;
  background-color: rgb(255 255 255 / 20%);
  transition: 0.3s;
  border-radius: 20px;
}

:deep(.ft-eq-toggle-slider::before) {
  position: absolute;
  content: "";
  height: 14px;
  width: 14px;
  left: 3px;
  bottom: 3px;
  background-color: #fff;
  transition: 0.3s;
  border-radius: 50%;
}

:deep(.ft-eq-toggle input:checked + .ft-eq-toggle-slider) {
  background-color: var(--primary-color, #f00);
}

:deep(.ft-eq-toggle input:checked + .ft-eq-toggle-slider::before) {
  transform: translateX(16px);
}

:deep(.ft-eq-sliders) {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  padding: 8px 0;
  transition: opacity 0.3s;
}

:deep(.ft-eq-slider-wrapper) {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  flex: 1;
}

:deep(.ft-eq-value) {
  color: #fff;
  font-size: 11px;
  min-width: 28px;
  text-align: center;
}

:deep(.ft-eq-slider) {
  -webkit-appearance: none;
  appearance: none;
  width: 4px;
  height: 100px;
  background: rgb(255 255 255 / 20%);
  border-radius: 2px;
  outline: none;
  writing-mode: vertical-lr;
  direction: rtl;
}

:deep(.ft-eq-slider::-webkit-slider-thumb) {
  -webkit-appearance: none;
  appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: var(--primary-color, #f00);
  cursor: pointer;
  transition: transform 0.1s;
}

:deep(.ft-eq-slider::-webkit-slider-thumb:hover) {
  transform: scale(1.2);
}

:deep(.ft-eq-slider::-moz-range-thumb) {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: var(--primary-color, #f00);
  cursor: pointer;
  border: none;
}

:deep(.ft-eq-slider:disabled) {
  opacity: 0.5;
  cursor: not-allowed;
}

:deep(.ft-eq-slider:disabled::-webkit-slider-thumb) {
  cursor: not-allowed;
}

:deep(.ft-eq-label) {
  color: rgb(255 255 255 / 70%);
  font-size: 10px;
  white-space: nowrap;
}

:deep(.ft-eq-footer) {
  display: flex;
  gap: 8px;
  padding-top: 8px;
  border-top: 1px solid rgb(255 255 255 / 10%);
}

:deep(.ft-eq-preset) {
  flex: 1;
  padding: 6px 8px;
  background-color: rgb(255 255 255 / 10%);
  color: #fff;
  border: none;
  border-radius: 4px;
  font-size: 12px;
  cursor: pointer;
}

:deep(.ft-eq-preset:hover) {
  background-color: rgb(255 255 255 / 20%);
}

:deep(.ft-eq-preset option) {
  background-color: #1c1c1c;
  color: #fff;
}

:deep(.ft-eq-reset) {
  padding: 6px 12px;
  background-color: rgb(255 255 255 / 10%);
  color: #fff;
  border: none;
  border-radius: 4px;
  font-size: 12px;
  cursor: pointer;
  transition: background-color 0.2s;
}

:deep(.ft-eq-reset:hover) {
  background-color: rgb(255 255 255 / 20%);
}

/* Audio Effects Section */
:deep(.ft-eq-effects) {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 8px 0;
  border-top: 1px solid rgb(255 255 255 / 10%);
}

:deep(.ft-eq-effects-title) {
  color: rgb(255 255 255 / 70%);
  font-size: 11px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 4px;
}

:deep(.ft-eq-effect-row) {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
}

:deep(.ft-eq-effect-label) {
  color: #fff;
  font-size: 12px;
  flex-shrink: 0;
}

:deep(.ft-eq-effect-slider-container) {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
  max-width: 180px;
}

:deep(.ft-eq-effect-slider) {
  -webkit-appearance: none;
  appearance: none;
  flex: 1;
  height: 4px;
  background: rgb(255 255 255 / 20%);
  border-radius: 2px;
  outline: none;
}

:deep(.ft-eq-effect-slider::-webkit-slider-thumb) {
  -webkit-appearance: none;
  appearance: none;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--primary-color, #f00);
  cursor: pointer;
  transition: transform 0.1s;
}

:deep(.ft-eq-effect-slider::-webkit-slider-thumb:hover) {
  transform: scale(1.2);
}

:deep(.ft-eq-effect-slider::-moz-range-thumb) {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--primary-color, #f00);
  cursor: pointer;
  border: none;
}

:deep(.ft-eq-effect-value) {
  color: rgb(255 255 255 / 70%);
  font-size: 11px;
  min-width: 40px;
  max-width: 60px;
  text-align: right;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

:deep(.ft-eq-toggle-small) {
  width: 32px;
  height: 18px;
}

:deep(.ft-eq-toggle-small .ft-eq-toggle-slider::before) {
  height: 12px;
  width: 12px;
}

:deep(.ft-eq-toggle-small input:checked + .ft-eq-toggle-slider::before) {
  transform: translateX(14px);
}

/* Mobile styles for equalizer */
@media only screen and (max-width: 680px) {
  :deep(.ft-equalizer-panel) {
    bottom: 50px;
    right: 5px;
    left: 5px;
    min-width: auto;
    padding: 10px;
  }

  :deep(.ft-eq-slider) {
    height: 80px;
  }
}

/* Bilingual Subtitle Button */
:deep(.bilingual-button.bilingual-active) {
  color: var(--primary-color, #f00) !important;
}

:deep(.bilingual-button.bilingual-active svg path) {
  fill: var(--primary-color, #f00) !important;
}

/* stylelint-enable liberty/use-logical-spec */
